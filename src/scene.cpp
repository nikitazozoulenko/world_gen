#include <scene.h>
#include <misc.h>


//////////// SCENE ///////////////////////////////////////////////////////////

Scene::Scene(Settings& settings, GLFWwindow* window, InputScheme* p_input_scheme, MasterRenderer& masterRenderer):
    camera(Camera()),
    settings(settings),
    p_input_scheme(p_input_scheme),
    masterRenderer(masterRenderer)
{

}

Scene::~Scene()
{
    if(p_input_scheme)
    {
        delete p_input_scheme;
    }
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////// Free Cam Scene ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

FreeCamWorld::FreeCamWorld(Settings& settings, GLFWwindow* window, MasterRenderer& masterRenderer):
    Scene(settings, window, new FreeCamWorldInputScheme(settings, window, camera, this), masterRenderer),
    ui(UI_FreeCamWorld(this)),
    world(World(settings, camera, masterRenderer.block_renderer.blockIDMap))
{
    ui.createUI();
}


void FreeCamWorld::render()
{
    masterRenderer.render_freecamworld(this);
}


void FreeCamWorld::scene_logic(double delta_time)
{
    world.gameLogic(delta_time);
}


void FreeCamWorld::slider_amp_fun(double val, double change)
{
    print_float("slider",0);
    // world.chunk_manager.amplitude=val;
}

void FreeCamWorld::slider_size_fun(double val, double change)
{
    print_float("slider",1);
    // world.chunk_manager.size=val;
}


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////// MainMenu Scene ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

MainMenu::MainMenu(Settings& settings, GLFWwindow* window, MasterRenderer& masterRenderer):
    Scene(settings, window, new MainMenuInputScheme(settings, window, camera, this), masterRenderer),
    ui(UI_MainMenu(this))
{
    ui.createUI();
}


void MainMenu::test(double val, double change)
{
    print_float("sliding", 0);
}


void MainMenu::render()
{
    masterRenderer.render_mainmenu(this);
}


void MainMenu::scene_logic(double delta_time)
{
    
}