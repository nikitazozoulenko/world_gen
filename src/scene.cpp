#include <scene.h>
#include <misc.h>

//////////// SCENE ///////////////////////////////////////////////////////////

Scene::Scene(Settings& settings, GLFWwindow* window, InputScheme* p_input_scheme):
    camera(Camera()),
    settings(settings),
    p_input_scheme(p_input_scheme)
{

}

Scene::~Scene()
{
    if(p_input_scheme)
    {
        delete p_input_scheme;
    }
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////// Free Cam Scene ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

FreeCamWorld::FreeCamWorld(Settings& settings, GLFWwindow* window):
    Scene(settings, window, new FreeCamWorldInputScheme(settings, window, camera)),
    world(World(settings))
{

}


void FreeCamWorld::render(MasterRenderer& masterRenderer)
{
    masterRenderer.render_freecamworld(world, camera);
}


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////// MainMenu Scene ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

MainMenu::MainMenu(Settings& settings, GLFWwindow* window):
    Scene(settings, window, new MainMenuInputScheme(settings, window, camera, ui_windows))
{
    createUI();
}

void MainMenu::createUI()
{
    UIWindow window0 = UIWindow(glm::vec2(0.1, 0.1), 0.4, 0.4, glm::vec3(54/255.0, 54/255.0, 99/255.0));
    UIWindow window1 = UIWindow(glm::vec2(0.2, 0.6), 0.7, 0.3, glm::vec3(0.8,0.3,0.2));
    ui_windows.push_back(window0);
    ui_windows.push_back(window1);
}


void MainMenu::render(MasterRenderer& masterRenderer)
{
    masterRenderer.render_mainmenu(camera, ui_windows);
}

