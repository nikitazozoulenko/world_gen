#include <scene.h>
#include <misc.h>

#include <algorithm>

//////////// SCENE ///////////////////////////////////////////////////////////

Scene::Scene(Settings& settings, GLFWwindow* window, InputScheme* p_input_scheme, MasterRenderer& masterRenderer):
    camera(Camera()),
    settings(settings),
    p_input_scheme(p_input_scheme),
    masterRenderer(masterRenderer)
{

}

Scene::~Scene()
{
    if(p_input_scheme)
    {
        delete p_input_scheme;
    }
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////// Free Cam Scene ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

FreeCamWorld::FreeCamWorld(Settings& settings, GLFWwindow* window, MasterRenderer& masterRenderer):
    Scene(settings, window, new FreeCamWorldInputScheme(settings, window, camera), masterRenderer),
    world(World(settings))
{

}


void FreeCamWorld::render()
{
    masterRenderer.render_freecamworld(world, camera);
}


void FreeCamWorld::scene_logic(float delta_time)
{
    
}


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////// MainMenu Scene ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

MainMenu::MainMenu(Settings& settings, GLFWwindow* window, MasterRenderer& masterRenderer):
    Scene(settings, window, new MainMenuInputScheme(settings, window, camera, this), masterRenderer),
    ui(UI_MainMenu(this))
{
    ui.createUI();
}


void MainMenu::test()
{
    print_float("sliding", 0);
}


void MainMenu::render()
{
    masterRenderer.render_mainmenu(ui.windows, camera);
}


void MainMenu::scene_logic(float delta_time)
{
    
}